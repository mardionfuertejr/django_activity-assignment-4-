<!DOCTYPE html>
<html>
<head>
    <title>Library</title>
</head>
<body>
    <h1>All Books</h1>
    <ul>
        {% for book in books %}
        <li>
            {{ book.title }} by {{ book.author.name }}<br>
            Categories:
            {% for c in book.categories.all %}
                {{ c.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
            <br>Published: {{ book.published }}
        </li>
        {% endfor %}
    </ul>

    <h2>All Categories</h2>
    <ul>
        {% for category in categories %}
        <li>{{ category.name }}</li>
        {% endfor %}
    </ul>
</body>
</html>
